{% extends "base.html" %}

{% block app_content %}

<h1>Welcome to notes app.</h1>
<h4>How to use:</h4>
<p>Drag this bookmarklet to your bookmarks toolbar and click it when you are on a wikipedia page you would like to take notes on:</p>
<p><a href="javascript:location.href='http://enigmatic-journey-57232.herokuapp.com/page/?url='+location.href+'&title='+document.title;">Note1: note opens on new page</a></p>
<p>(You must be signed into the app for the bookmarklet to work. If you are not signed in then clicking it will take you to the login page)</p>
{% if not userLoggedIn %}
<a href="javascript:(function()%7Bfunction callback()%7B(function(%24)%7Bvar jQuery%3D%24%3Bconsole.log("bookmarklet starting")%3Bvar url%3Dlocation.href%3Bvar title%3Ddocument.title%3Bh%3D'http%3A%2F%2F127.0.0.1%3A5000%2Fpage3%2F%3Furl%3D'%3Bvar element %3D document.getElementById('bodyContent')%3Bvar parent %3D element.parentNode%3Bvar wrapper %3D document.createElement('div')%3Bvar c %3D document.createElement('FORM')%3Bvar note %3D document.createElement('textarea')%3Bc.setAttribute('action'%2C h%2Burl)%3Bc.setAttribute('method'%2C 'POST')%3Bwrapper.setAttribute("id"%2C "w")%3Bnote.setAttribute("id"%2C "n")%3Bnote.setAttribute('name'%2C 'n')%3Bif(typeof nbody !%3D%3D 'undefined')%7Bnote.innerHTML %3D nbody%3B    %7Dc.setAttribute("id"%2C "c")%3Bc.appendChild(note)%3Bparent.replaceChild(wrapper%2C element)%3Bwrapper.appendChild(element)%3Bwrapper.appendChild(c)%3Bvar btn %3D document.createElement("BUTTON")%3Bbtn.setAttribute('type'%2C 'submit')%3Bbtn.innerHTML %3D "CLICK ME"%3Bc.appendChild(btn)%3Bvar style %3D document.createElement('style')%3Bstyle.innerHTML %3D %60%23w %7B%7D%23bodyContent%7Bwidth%3A60%25%3B%7D%23c%7Btop%3A 15%25%3Bwidth%3A 35%25%3Bheight%3A 80vh%3Bbackground-color%3A blue%3Bposition%3A fixed%3Bright%3A 0%3B%7D%23note%7Bwidth%3A100%25%3Bmin-height%3A90%25%3Boverflow-y%3Ascroll%3B%7D%60%3Bdocument.head.appendChild(style)%7D)(jQuery.noConflict(true))%7Dvar s%3Ddocument.createElement("script")%3Bs.src%3D"https%3A%2F%2Fajax.googleapis.com%2Fajax%2Flibs%2Fjquery%2F1.11.1%2Fjquery.min.js"%3Bif(s.addEventListener)%7Bs.addEventListener("load"%2Ccallback%2Cfalse)%7Delse if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)()">Note2: note on wiki page</a>
{% elif userLoggedIn %}
<h1>Hi {{ user.username }}.</h1>

<h3>Saved pages:</h3>
{% for page in user.saved_pages %}
<p><a href="{{ page['url'] }}">{{page['title']}}</a></p>
{% endfor %}

<h3>Notes:</h3>
{% for note in notes %}
<div>
    <i class="material-icons">expand_more</i>
    <a href="{{ url_for('note', note_id=note._id )}}">{{ note['title'] }}</a>
    <!--<a href="{{ note['url'] }}">{{ note['title'] }}</a>-->
    <a href="{{url_for('delete_note', note_id=note._id)}}" class='deleteNoteButton'>Delete</a>
    <a href="{{url_for('edit_note_title', note_id=note._id)}}" class='editNoteTitleButton'>Edit Note</a>

</div>
{% endfor %}
{% endif %}

{% endblock %}